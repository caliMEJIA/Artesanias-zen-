<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <title>Nosotros - Artesanías Zenú</title>
</head>
<body>
<!-- HEADER SUPERIOR -->
    <div class="header-top">
        <div class="header-container">
            <div class="logo">Artesanías Zenú <span>• Tienda Virtual</span></div>
            <form class="search-bar" onsubmit="event.preventDefault(); alert('Búsqueda: ' + this.query.value);">
                <input type="text" name="query" placeholder="Buscar información..." autocomplete="off">
                <button type="submit">🔍</button>
            </form>
            <div class="header-actions">
                <div id="user-info" class="user-info" style="display: none;">
                    <span class="welcome-text">¡Hola, <span id="user-name">Usuario</span>!</span>
                    <button class="header-action logout-btn" id="btn-logout" title="Cerrar sesión">🚪</button>
                </div>
                <button class="header-action" id="btn-cuenta" title="Mi cuenta">👤</button>
                <button class="header-action" id="btn-carrito" title="Carrito">
                    🛒<span class="badge" id="carrito-badge">0</span>
                </button>
            </div>
        </div>
    </div>

    <!-- MENÚ DE CATEGORÍAS -->
    <nav class="menu-categorias">
        <div class="categorias-container">
            <a href="./index.html" class="categoria-link">Inicio</a>
            <a href="./canastos.html" class="categoria-link">Canastos</a>
            <a href="./mochilas.html" class="categoria-link">Mochilas</a>
            <a href="./sombreros.html" class="categoria-link">Sombreros</a>
            <a href="./pulseras.html" class="categoria-link">Pulseras</a>
            <a href="./ofertas.html" class="categoria-link">Ofertas</a>
        </div>
    </nav>

    <!-- BANNER PRINCIPAL -->
    <section class="banner">
        <div class="banner-text">
            <h2>Nosotros</h2>
            <p>Conoce la historia, misión y valores de Artesanías Zenú. Descubre cómo preservamos las tradiciones ancestrales y apoyamos a las comunidades indígenas.</p>
        </div>
        <div class="banner-img">🏛️</div>
    </section>

    <!-- SECCIÓN DE INFORMACIÓN -->
    <section class="nosotros-content">
        <div class="nosotros-container">
            <!-- NUESTRA HISTORIA -->
            <div class="nosotros-section">
                <h2>Nuestra Historia</h2>
                <div class="historia-content">
                    <div class="historia-text">
                        <p>Artesanías Zenú nació del deseo de preservar y difundir las tradiciones ancestrales de la cultura Zenú, una de las civilizaciones precolombinas más importantes de Colombia. Desde nuestros inicios, nos hemos dedicado a mantener viva la herencia cultural de esta comunidad indígena.</p>
                        <p>Fundada en 2010 por un grupo de artesanos y antropólogos comprometidos con la preservación cultural, nuestra empresa ha crecido hasta convertirse en un referente en la comercialización de artesanías tradicionales colombianas.</p>
                        <p>Hoy en día, trabajamos directamente con más de 50 familias de artesanos Zenú, garantizando que cada pieza sea auténtica y que los beneficios lleguen directamente a las comunidades que las crean.</p>
        </div>
                    <div class="historia-image">
                        <img src="./Historia Zenú.jpg" alt="Historia de Artesanías Zenú" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjVGNUY1Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkltYWdlbiBubyBkaXNwb25pYmxlPC90ZXh0Pgo8L3N2Zz4K'">
        </div>
        </div>
        </div>

            <!-- NUESTRA MISIÓN -->
            <div class="nosotros-section">
                <h2>Nuestra Misión</h2>
                <div class="mision-content">
                    <div class="mision-card">
                        <div class="mision-icon">🎯</div>
                        <h3>Preservar la Cultura</h3>
                        <p>Mantener vivas las técnicas ancestrales de la cultura Zenú y transmitirlas a las nuevas generaciones.</p>
                    </div>
                    <div class="mision-card">
                        <div class="mision-icon">🤝</div>
                        <h3>Apoyar Comunidades</h3>
                        <p>Generar oportunidades económicas sostenibles para las familias de artesanos indígenas.</p>
                    </div>
                    <div class="mision-card">
                        <div class="mision-icon">🌍</div>
                        <h3>Difundir Tradiciones</h3>
                        <p>Dar a conocer la riqueza cultural Zenú a nivel nacional e internacional.</p>
                    </div>
                </div>
            </div>

            <!-- NUESTROS VALORES -->
            <div class="nosotros-section">
                <h2>Nuestros Valores</h2>
                <div class="valores-grid">
                    <div class="valor-item">
                        <span class="valor-icon">✨</span>
                        <h4>Autenticidad</h4>
                        <p>Cada pieza es única y refleja la verdadera esencia de la cultura Zenú.</p>
                    </div>
                    <div class="valor-item">
                        <span class="valor-icon">🌱</span>
                        <h4>Sostenibilidad</h4>
                        <p>Utilizamos materiales naturales y procesos respetuosos con el medio ambiente.</p>
                    </div>
                    <div class="valor-item">
                        <span class="valor-icon">👥</span>
                        <h4>Comunidad</h4>
                        <p>Trabajamos en conjunto con las comunidades para su desarrollo integral.</p>
                    </div>
                    <div class="valor-item">
                        <span class="valor-icon">🎨</span>
                        <h4>Calidad</h4>
                        <p>Mantenemos los más altos estándares en cada producto que ofrecemos.</p>
                    </div>
                </div>
            </div>

            <!-- NUESTRO EQUIPO -->
            <div class="nosotros-section">
                <h2>Nuestro Equipo</h2>
                <div class="equipo-grid">
                    <div class="equipo-card">
                        <div class="equipo-foto">
                            <img src="./Equipo1.jpg" alt="María González" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiBmaWxsPSIjRjVGNUY1Ii8+Cjx0ZXh0IHg9Ijc1IiB5PSI3NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOTk5OTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Gb3RvIG5vIGRpc3BvbmlibGU8L3RleHQ+Cjwvc3ZnPgo='">
                        </div>
                        <h3>María González</h3>
                        <p class="equipo-cargo">Directora General</p>
                        <p class="equipo-desc">Antropóloga especializada en culturas indígenas colombianas con más de 15 años de experiencia.</p>
                    </div>
                    <div class="equipo-card">
                        <div class="equipo-foto">
                            <img src="./Equipo2.jpg" alt="Carlos Mendoza" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiBmaWxsPSIjRjVGNUY1Ii8+Cjx0ZXh0IHg9Ijc1IiB5PSI3NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOTk5OTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Gb3RvIG5vIGRpc3BvbmlibGU8L3RleHQ+Cjwvc3ZnPgo='">
                        </div>
                        <h3>Carlos Mendoza</h3>
                        <p class="equipo-cargo">Coordinador de Artesanos</p>
                        <p class="equipo-desc">Artesano Zenú de tercera generación, especialista en técnicas tradicionales de tejido.</p>
                    </div>
                    <div class="equipo-card">
                        <div class="equipo-foto">
                            <img src="./Equipo3.jpg" alt="Ana Rodríguez" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiBmaWxsPSIjRjVGNUY1Ii8+Cjx0ZXh0IHg9Ijc1IiB5PSI3NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOTk5OTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Gb3RvIG5vIGRpc3BvbmlibGU8L3RleHQ+Cjwvc3ZnPgo='">
                        </div>
                        <h3>Ana Rodríguez</h3>
                        <p class="equipo-cargo">Gerente Comercial</p>
                        <p class="equipo-desc">Especialista en comercio justo y desarrollo sostenible de comunidades artesanales.</p>
                    </div>
                </div>
            </div>

            <!-- CONTACTO -->
            <div class="nosotros-section">
                <h2>Contáctanos</h2>
                <div class="contacto-content">
                    <div class="contacto-info">
                        <div class="contacto-item">
                            <span class="contacto-icon">📍</span>
                            <div>
                                <h4>Dirección</h4>
                                <p>Calle 15 # 3-45, Centro Histórico<br>Cartagena, Bolívar, Colombia</p>
                            </div>
                        </div>
                        <div class="contacto-item">
                            <span class="contacto-icon">📞</span>
                            <div>
                                <h4>Teléfono</h4>
                                <p>+57 (5) 664-7890</p>
                            </div>
                        </div>
                        <div class="contacto-item">
                            <span class="contacto-icon">📧</span>
                            <div>
                                <h4>Email</h4>
                                <p>info@artesaniaszenu.com</p>
                            </div>
                        </div>
                        <div class="contacto-item">
                            <span class="contacto-icon">🕒</span>
                            <div>
                                <h4>Horarios</h4>
                                <p>Lunes a Viernes: 8:00 AM - 6:00 PM<br>Sábados: 9:00 AM - 4:00 PM</p>
                            </div>
                        </div>
                    </div>
                    <div class="contacto-form">
                        <h3>Envíanos un mensaje</h3>
                        <form onsubmit="event.preventDefault(); alert('Mensaje enviado correctamente');">
                            <input type="text" placeholder="Tu nombre" required>
                            <input type="email" placeholder="Tu email" required>
                            <textarea placeholder="Tu mensaje" rows="4" required></textarea>
                            <button type="submit">Enviar mensaje</button>
                        </form>
                    </div>
                </div>
          </div> 
        </div>
    </section>

    <!-- MODAL DE AUTENTICACIÓN -->
    <div class="modal-bg" id="modal-bg">
        <div class="modal-content" id="modal-content">
            <!-- El contenido del modal se cargará dinámicamente -->
        </div>
    </div>

    <!-- CARRITO DESLIZABLE -->
    <div class="cart-overlay" id="cart-overlay"></div>
    <div class="cart-slide" id="cart-slide">
        <div class="cart-header">
            <h3>Mi Carrito</h3>
            <button class="cart-close" id="cart-close">&times;</button>
        </div>
        <div class="cart-content" id="cart-content">
            <!-- Los productos del carrito se cargarán dinámicamente -->
        </div>
        <div class="cart-footer" id="cart-footer">
            <div class="cart-summary" id="cart-summary" style="display: none;">
                <div class="cart-summary-row">
                    <span class="cart-summary-label">Subtotal:</span>
                    <span class="cart-summary-value" id="cart-subtotal">$0</span>
                </div>
                <div class="cart-summary-row">
                    <span class="cart-summary-label">Envío:</span>
                    <span class="cart-summary-value" id="cart-shipping">Gratis</span>
                </div>
                <div class="cart-summary-row">
                    <span class="cart-summary-label">Total:</span>
                    <span class="cart-summary-value" id="cart-total-summary">$0</span>
                </div>
            </div>
            <div class="cart-total">
                <span class="cart-total-label">Total:</span>
                <span class="cart-total-amount" id="cart-total">$0</span>
            </div>
            <div class="cart-actions">
                <button class="btn-comprar" id="btn-comprar" disabled>Comprar Ahora</button>
                <button class="btn-continuar" id="btn-continuar">Continuar Comprando</button>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="footer-links">
            <a href="./nosotros.html">Nosotros</a>
            <a href="./index.html">Inicio</a>
            <a href="./canastos.html">Canastos</a>
            <a href="./mochilas.html">Mochilas</a>
            <a href="./sombreros.html">Sombreros</a>
            <a href="./pulseras.html">Pulseras</a>
            <a href="./ofertas.html">Ofertas</a>
        </div>
        <div class="footer-social">
            <a href="#" title="Facebook">📘</a>
            <a href="#" title="Instagram">📷</a>
            <a href="#" title="WhatsApp">📱</a>
            <a href="#" title="Email">📧</a>
        </div>
        <p>&copy; 2024 Artesanías Zenú. Todos los derechos reservados.</p>
    </footer>

    <script src="./js/carrito.js"></script>
    <script>
    // VARIABLES GLOBALES
    let carrito = JSON.parse(localStorage.getItem('carritoArtesanias')) || [];

    // ELEMENTOS DEL DOM
    const modalBg = document.getElementById('modal-bg');
    const modalContent = document.getElementById('modal-content');
    const userInfo = document.getElementById('user-info');

    // Cargar carrito al iniciar la página
    cargarCarrito();
    const userName = document.getElementById('user-name');

    // FORMULARIOS DE MODAL
    const loginForm = `
    <div class='conten_gen'>
      <div class='tex'>
        <h3>Hola de nuevo</h3>
        <p>Bienvenido</p>
            <input type='text' placeholder='Ingresar tu usuario' id='login-usuario'>
            <input type='password' placeholder='Ingresar tu contraseña' id='login-contraseña'>
            <button type='button' class='btn_ingresar' onclick='iniciarSesion()'>Ingresar</button>
        <p>
          <a href='#' id='modal-registro-link'>Registrarse</a> |
          <a href='#' id='modal-olvido-link'>¿Olvidaste tu contraseña?</a>
        </p>
      </div>
      <div class='conten_izquierdo'>
        <h2>Artesanos tejiendo para crecer</h2>
            <p>Únete a nuestra comunidad y descubre la belleza de las artesanías Zenú</p>
      </div>
    </div>`;

    const registroForm = `
    <div class='conten_gen'>
      <div class='tex'>
            <h3>Crear cuenta</h3>
            <p>Únete a nuestra comunidad</p>
            <input type='text' placeholder='Nombre de usuario' id='reg-usuario'>
            <input type='email' placeholder='Correo electrónico' id='reg-email'>
            <input type='password' placeholder='Contraseña' id='reg-contraseña'>
            <button type='button' class='btn_ingresar' onclick='registrarUsuario()'>Registrarse</button>
            <p>
                <a href='#' id='modal-login-link'>¿Ya tienes cuenta? Inicia sesión</a>
            </p>
      </div>
      <div class='conten_izquierdo'>
            <h2>Bienvenido a la familia Zenú</h2>
            <p>Forma parte de nuestra comunidad y apoya el arte ancestral</p>
      </div>
    </div>`;

    const olvidoForm = `
    <div class='conten_gen'>
      <div class='tex'>
        <h3>Recuperar contraseña</h3>
            <p>Ingresa tu email para recuperar tu cuenta</p>
            <input type='email' placeholder='Correo electrónico' id='olvido-email'>
            <button type='button' class='btn_ingresar' onclick='recuperarContraseña()'>Enviar enlace</button>
            <p>
                <a href='#' id='modal-login-link-olvido'>¿Recordaste tu contraseña? Inicia sesión</a>
            </p>
      </div>
      <div class='conten_izquierdo'>
            <h2>No te preocupes</h2>
            <p>Te ayudamos a recuperar el acceso a tu cuenta</p>
      </div>
    </div>`;

    // FUNCIONES DE INICIALIZACIÓN
    function init() {
        verificarUsuarioLogueado();
        configurarEventListeners();
    }

    function verificarUsuarioLogueado() {
        const usuarioLogueado = localStorage.getItem('usuarioLogueado');
        if (usuarioLogueado) {
            const usuario = localStorage.getItem('usuario') || 'Usuario';
            userName.textContent = usuario;
            userInfo.style.display = 'flex';
        }
    }

    function configurarEventListeners() {
        // Botón de cuenta
        document.getElementById('btn-cuenta').onclick = function() {
            const usuarioLogueado = localStorage.getItem('usuarioLogueado');
            if (usuarioLogueado) {
                alert('Ya estás logueado como: ' + localStorage.getItem('usuario'));
            } else {
                openModal(loginForm);
            }
        };

        // Botón de carrito
        document.getElementById('btn-carrito').onclick = abrirCarrito;

        // Botón de logout
        document.getElementById('btn-logout').onclick = function() {
            localStorage.removeItem('usuarioLogueado');
            localStorage.removeItem('usuario');
            userInfo.style.display = 'none';
            alert('Sesión cerrada correctamente');
        };
    }

    // FUNCIONES DE MODAL
    function openModal(content) {
      modalContent.innerHTML = `<button class='modal-close' id='modal-close'>&times;</button>` + content;
      modalBg.classList.add('active');
      setTimeout(() => {
        document.getElementById('modal-close').onclick = closeModal;
        const reg = document.getElementById('modal-registro-link');
        if(reg) reg.onclick = (e) => { e.preventDefault(); openModal(registroForm); };
        const olv = document.getElementById('modal-olvido-link');
        if(olv) olv.onclick = (e) => { e.preventDefault(); openModal(olvidoForm); };
            const loginFromReg = document.getElementById('modal-login-link');
            if(loginFromReg) loginFromReg.onclick = (e) => { e.preventDefault(); openModal(loginForm); };
            const loginFromOlv = document.getElementById('modal-login-link-olvido');
            if(loginFromOlv) loginFromOlv.onclick = (e) => { e.preventDefault(); openModal(loginForm); };
      }, 10);
    }

    function closeModal() {
      modalBg.classList.remove('active');
    }

    // FUNCIONES DE CARRITO
    function agregarCarrito(producto) {
        carrito.push(producto);
        document.getElementById('carrito-badge').textContent = carrito.length;
        alert('Producto agregado: ' + producto);
    }

    // FUNCIONES DE CARRITO
    function agregarCarrito(nombreProducto) {
        const usuarioLogueado = localStorage.getItem('usuarioLogueado');
        
        if (!usuarioLogueado) {
            openModal(loginForm);
            return;
        }

        // Para la página nosotros, no hay productos específicos, pero podemos simular
        const producto = {
            id: Date.now(),
            nombre: nombreProducto,
            precio: 50000,
            imagen: './producto-generico.jpg',
            descripcion: 'Producto artesanal Zenú'
        };

        const itemExistente = carrito.find(item => item.nombre === producto.nombre);
        if (itemExistente) {
            itemExistente.cantidad += 1;
        } else {
            carrito.push({
                ...producto,
                cantidad: 1
            });
        }

        actualizarCarritoCompleto();
        guardarCarrito();
        mostrarNotificacion(`${producto.nombre} agregado al carrito`);
    }

    function actualizarCarrito() {
        // Actualizar badge
        const totalItems = carrito.reduce((sum, item) => sum + item.cantidad, 0);
        document.getElementById('carrito-badge').textContent = totalItems;

        // Actualizar contenido del carrito
        if (carrito.length === 0) {
            document.getElementById('cart-content').innerHTML = `
                <div class="cart-empty">
                    <div class="cart-empty-icon">🛒</div>
                    <h4>Tu carrito está vacío</h4>
                    <p>Descubre nuestras hermosas artesanías Zenú y agrega algunos productos para comenzar tu compra</p>
                    <button class="btn-explorar" onclick="cerrarCarrito()">Explorar Productos</button>
                </div>
            `;
            document.getElementById('btn-comprar').disabled = true;
            document.getElementById('cart-total').textContent = '$0';
            document.getElementById('cart-summary').style.display = 'none';
        } else {
            document.getElementById('cart-content').innerHTML = carrito.map(item => {
                const subtotal = item.precio * item.cantidad;
                return `
                    <div class="cart-item" data-id="${item.id}">
                        <div class="cart-item-image">
                            <img src="${item.imagen}" alt="${item.nombre}" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="fallback-icon" style="display: none;">🏺</div>
                        </div>
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.nombre}</div>
                            <div class="cart-item-description">${item.descripcion}</div>
                            <div class="cart-item-price-container">
                                <div class="cart-item-price">$${item.precio.toLocaleString()}</div>
                                <div class="cart-item-subtotal">Subtotal: $${subtotal.toLocaleString()}</div>
                            </div>
                            <div class="cart-item-quantity">
                                <span class="quantity-label">Cantidad:</span>
                                <button class="quantity-btn" onclick="cambiarCantidad(${item.id}, -1)">-</button>
                                <span class="quantity-display">${item.cantidad}</span>
                                <button class="quantity-btn" onclick="cambiarCantidad(${item.id}, 1)">+</button>
                            </div>
                        </div>
                        <button class="cart-item-remove" onclick="eliminarItem(${item.id})" title="Eliminar del carrito">🗑️</button>
                    </div>
                `;
            }).join('');

            // Calcular totales
            const subtotal = carrito.reduce((sum, item) => sum + (item.precio * item.cantidad), 0);
            const shipping = subtotal > 100000 ? 0 : 15000; // Envío gratis sobre $100k
            const total = subtotal + shipping;

            // Actualizar resumen
            document.getElementById('cart-subtotal').textContent = `$${subtotal.toLocaleString()}`;
            document.getElementById('cart-shipping').textContent = shipping === 0 ? 'Gratis' : `$${shipping.toLocaleString()}`;
            document.getElementById('cart-total-summary').textContent = `$${total.toLocaleString()}`;
            document.getElementById('cart-total').textContent = `$${total.toLocaleString()}`;
            
            // Mostrar resumen
            document.getElementById('cart-summary').style.display = 'block';
            document.getElementById('btn-comprar').disabled = false;
        }
    }

    function cambiarCantidad(id, cambio) {
        const item = carrito.find(item => item.id === id);
        if (!item) return;

        item.cantidad += cambio;
        
        if (item.cantidad <= 0) {
            eliminarItem(id);
        } else {
            actualizarCarritoCompleto();
            guardarCarrito();
        }
    }

    function eliminarItem(id) {
        carrito = carrito.filter(item => item.id !== id);
        actualizarCarritoCompleto();
        guardarCarrito();
    }

    function abrirCarrito() {
        const usuarioLogueado = localStorage.getItem('usuarioLogueado');
        
        if (!usuarioLogueado) {
            openModal(loginForm);
            return;
        }

        document.getElementById('cart-overlay').classList.add('active');
        document.getElementById('cart-slide').classList.add('active');
    }

    function cerrarCarrito() {
        document.getElementById('cart-overlay').classList.remove('active');
        document.getElementById('cart-slide').classList.remove('active');
    }

    function comprar() {
        if (carrito.length === 0) return;

        const subtotal = carrito.reduce((sum, item) => sum + (item.precio * item.cantidad), 0);
        const shipping = subtotal > 100000 ? 0 : 15000;
        const total = subtotal + shipping;
        
        const resumen = carrito.map(item => 
            `${item.nombre} x${item.cantidad} - $${(item.precio * item.cantidad).toLocaleString()}`
        ).join('\n');

        const confirmacion = `¿Confirmar compra?\n\n${resumen}\n\nSubtotal: $${subtotal.toLocaleString()}\nEnvío: ${shipping === 0 ? 'Gratis' : '$' + shipping.toLocaleString()}\n\nTOTAL: $${total.toLocaleString()}`;

        if (confirm(confirmacion)) {
            alert('¡Compra realizada con éxito! Te contactaremos pronto para coordinar la entrega.');
            carrito = [];
            actualizarCarritoCompleto();
            guardarCarrito();
            cerrarCarrito();
        }
    }

    function mostrarNotificacion(mensaje) {
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--naranja);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            z-index: 10000;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            animation: slideIn 0.3s ease;
        `;
        notification.textContent = mensaje;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }

    // FUNCIONES DE AUTENTICACIÓN
    function iniciarSesion() {
        const usuario = document.getElementById('login-usuario').value;
        const contraseña = document.getElementById('login-contraseña').value;

        if (!usuario || !contraseña) {
            alert('Por favor completa todos los campos');
            return;
        }
        
        // Simulación de login (aquí iría la lógica real de autenticación)
        if (usuario === 'admin' && contraseña === 'admin') {
            // Guardar estado de login en localStorage
            localStorage.setItem('usuarioLogueado', 'true');
            localStorage.setItem('usuario', usuario);
            alert('¡Bienvenido! Redirigiendo al dashboard...');
            closeModal();
            window.location.href = './dashboard/usuario.html';
        } else {
            alert('Usuario o contraseña incorrectos');
        }
    }
    
    function registrarUsuario() {
        const usuario = document.getElementById('reg-usuario').value;
        const email = document.getElementById('reg-email').value;
        const contraseña = document.getElementById('reg-contraseña').value;

        if (!usuario || !email || !contraseña) {
            alert('Por favor completa todos los campos');
            return;
        }
        
        // Validación básica de email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            alert('Por favor ingresa un email válido');
            return;
        }
        
        // Simulación de registro (aquí iría la lógica real de registro)
        // Guardar estado de login en localStorage
        localStorage.setItem('usuarioLogueado', 'true');
        localStorage.setItem('usuario', usuario);
        alert('¡Registro exitoso! Ya estás logueado');
        closeModal();
    }
    
    function recuperarContraseña() {
        const email = document.getElementById('olvido-email').value;
        
        if (!email) {
            alert('Por favor ingresa tu email');
            return;
        }
        
        // Validación básica de email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            alert('Por favor ingresa un email válido');
            return;
        }
        
        // Simulación de recuperación (aquí iría la lógica real de recuperación)
        alert('Se ha enviado un enlace de recuperación a tu email');
        openModal(loginForm);
    }

    // Cerrar modal al hacer clic fuera
    modalBg.onclick = function(e) {
        if (e.target === modalBg) {
            closeModal();
        }
    };

    // Event listeners del carrito
    document.getElementById('cart-close').onclick = cerrarCarrito;
    document.getElementById('btn-comprar').onclick = comprar;
    document.getElementById('btn-continuar').onclick = cerrarCarrito;
    document.getElementById('cart-overlay').onclick = cerrarCarrito;

    // Inicializar la aplicación
    init();
    </script>
</body>
</html>