<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <title>Mochilas Zen√∫ - Artesan√≠as Zen√∫</title>
</head>
<body>
    <!-- HEADER SUPERIOR -->
    <div class="header-top">
        <div class="header-container">
            <div class="logo">Artesan√≠as Zen√∫ <span>‚Ä¢ Tienda Virtual</span></div>
            <form class="search-bar" onsubmit="event.preventDefault(); alert('B√∫squeda: ' + this.query.value);">
                <input type="text" name="query" placeholder="Buscar mochilas..." autocomplete="off">
                <button type="submit">üîç</button>
            </form>
            <div class="header-actions">
                <div id="user-info" class="user-info" style="display: none;">
                    <span class="welcome-text">¬°Hola, <span id="user-name">Usuario</span>!</span>
                    <button class="header-action logout-btn" id="btn-logout" title="Cerrar sesi√≥n">üö™</button>
                </div>
                <button class="header-action" id="btn-cuenta" title="Mi cuenta">üë§</button>
                <button class="header-action" id="btn-carrito" title="Carrito">
                    üõí<span class="badge" id="carrito-badge">0</span>
                </button>
            </div>
        </div>
    </div>

    <!-- MEN√ö DE CATEGOR√çAS -->
    <nav class="menu-categorias">
        <div class="categorias-container">
            <a href="./index.html" class="categoria-link">Inicio</a>
            <a href="./canastos.html" class="categoria-link">Canastos</a>
            <a href="./mochilas.html" class="categoria-link active">Mochilas</a>
            <a href="./sombreros.html" class="categoria-link">Sombreros</a>
            <a href="./pulseras.html" class="categoria-link">Pulseras</a>
            <a href="./ofertas.html" class="categoria-link">Ofertas</a>
        </div>
    </nav>

    <!-- BANNER PRINCIPAL -->
    <section class="banner">
        <div class="banner-text">
            <h2>Mochilas Zen√∫</h2>
            <p>Descubre la funcionalidad y belleza de nuestras mochilas artesanales, elaboradas con t√©cnicas tradicionales Zen√∫. Perfectas para el uso diario y ocasiones especiales.</p>
        </div>
        <div class="banner-img">üéí</div>
    </section>

    <!-- BENEFICIOS -->
    <section class="beneficios">
        <div class="beneficio">
            <span class="beneficio-icono">‚ú®</span>
            <span class="beneficio-texto">Hechas a mano</span>
        </div>
        <div class="beneficio">
            <span class="beneficio-icono">üåø</span>
            <span class="beneficio-texto">Materiales naturales</span>
        </div>
        <div class="beneficio">
            <span class="beneficio-icono">üé®</span>
            <span class="beneficio-texto">Dise√±os √∫nicos</span>
        </div>
        <div class="beneficio">
            <span class="beneficio-icono">üöö</span>
            <span class="beneficio-texto">Env√≠os nacionales</span>
        </div>
    </section>

    <!-- FILTROS Y ORDENAMIENTO -->
    <section class="filtros-section">
        <div class="filtros-container">
            <div class="filtros-left">
                <span class="filtros-title">Filtrar por:</span>
                <select class="filtro-select" id="filtro-tipo">
                    <option value="">Todos los tipos</option>
                    <option value="escolar">Escolar</option>
                    <option value="trabajo">Trabajo</option>
                    <option value="viaje">Viaje</option>
                    <option value="deportiva">Deportiva</option>
                </select>
                <select class="filtro-select" id="filtro-precio">
                    <option value="">Todos los precios</option>
                    <option value="0-80000">$0 - $80.000</option>
                    <option value="80000-150000">$80.000 - $150.000</option>
                    <option value="150000-250000">$150.000 - $250.000</option>
                    <option value="250000+">$250.000+</option>
                </select>
        </div>
            <div class="filtros-right">
                <span class="filtros-title">Ordenar por:</span>
                <select class="filtro-select" id="ordenar-por">
                    <option value="nombre">Nombre</option>
                    <option value="precio-asc">Precio: Menor a Mayor</option>
                    <option value="precio-desc">Precio: Mayor a Menor</option>
                    <option value="popularidad">M√°s populares</option>
                </select>
        </div>
        </div>
    </section>

    <!-- PRODUCTOS DESTACADOS -->
    <section class="productos-destacados">
        <h2>Nuestra Colecci√≥n de Mochilas</h2>
        <div class="productos-grid" id="productos-grid">
            <!-- Los productos se cargar√°n din√°micamente -->
        </div>
    </section>

    <!-- MODAL DE AUTENTICACI√ìN -->
    <div class="modal-bg" id="modal-bg">
        <div class="modal-content" id="modal-content">
            <!-- El contenido del modal se cargar√° din√°micamente -->
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="footer-links">
            <a href="./nosotros.html">Nosotros</a>
            <a href="./index.html">Inicio</a>
            <a href="./canastos.html">Canastos</a>
            <a href="./mochilas.html">Mochilas</a>
            <a href="./sombreros.html">Sombreros</a>
            <a href="./pulseras.html">Pulseras</a>
            <a href="./ofertas.html">Ofertas</a>
        </div>
        <div class="footer-social">
            <a href="#" title="Facebook">üìò</a>
            <a href="#" title="Instagram">üì∑</a>
            <a href="#" title="WhatsApp">üì±</a>
            <a href="#" title="Email">üìß</a>
        </div>
        <p>&copy; 2024 Artesan√≠as Zen√∫. Todos los derechos reservados.</p>
    </footer>

    <script>
    // DATOS DE PRODUCTOS
    const productos = [
        {
            id: 1,
            nombre: "Mochila Escolar Tradicional",
            descripcion: "Mochila escolar elaborada con t√©cnicas tradicionales Zen√∫. Perfecta para estudiantes, con compartimentos organizados y dise√±o resistente.",
            precio: 95000,
            imagen: "./Mochila Escolar.jpg",
            tipo: "escolar",
            popularidad: 5,
            stock: 10
        },
        {
            id: 2,
            nombre: "Mochila de Trabajo",
            descripcion: "Mochila profesional ideal para el trabajo. Dise√±o elegante con m√∫ltiples compartimentos y materiales duraderos.",
            precio: 125000,
            imagen: "./Mochila Trabajo.jpg",
            tipo: "trabajo",
            popularidad: 4,
            stock: 8
        },
        {
            id: 3,
            nombre: "Mochila de Viaje",
            descripcion: "Mochila espaciosa perfecta para viajes. Capacidad amplia y dise√±o c√≥modo para largas caminatas y aventuras.",
            precio: 180000,
            imagen: "./Mochila Viaje.jpg",
            tipo: "viaje",
            popularidad: 4,
            stock: 6
        },
        {
            id: 4,
            nombre: "Mochila Deportiva",
            descripcion: "Mochila deportiva con ventilaci√≥n y dise√±o ergon√≥mico. Ideal para actividades f√≠sicas y deportes al aire libre.",
            precio: 110000,
            imagen: "./Mochila Deportiva.jpg",
            tipo: "deportiva",
            popularidad: 3,
            stock: 12
        },
        {
            id: 5,
            nombre: "Mochila Peque√±a Casual",
            descripcion: "Mochila peque√±a y elegante para uso diario. Dise√±o minimalista que combina tradici√≥n con modernidad.",
            precio: 75000,
            imagen: "./Mochila Peque√±a.jpg",
            tipo: "escolar",
            popularidad: 4,
            stock: 15
        },
        {
            id: 6,
            nombre: "Mochila Familiar Grande",
            descripcion: "Mochila extra grande para toda la familia. Capacidad m√°xima con compartimentos organizados y dise√±o tradicional.",
            precio: 220000,
            imagen: "./Mochila Familiar.jpg",
            tipo: "viaje",
            popularidad: 3,
            stock: 5
        }
    ];

    // VARIABLES GLOBALES
    let carrito = [];
    let productosFiltrados = [...productos];

    // ELEMENTOS DEL DOM
    const modalBg = document.getElementById('modal-bg');
    const modalContent = document.getElementById('modal-content');
    const productosGrid = document.getElementById('productos-grid');
    const userInfo = document.getElementById('user-info');
    const userName = document.getElementById('user-name');

    // FORMULARIOS DE MODAL
    const loginForm = `
    <div class='conten_gen'>
      <div class='tex'>
        <h3>Hola de nuevo</h3>
        <p>Bienvenido</p>
            <input type='text' placeholder='Ingresar tu usuario' id='login-usuario'>
            <input type='password' placeholder='Ingresar tu contrase√±a' id='login-contrase√±a'>
            <button type='button' class='btn_ingresar' onclick='iniciarSesion()'>Ingresar</button>
        <p>
          <a href='#' id='modal-registro-link'>Registrarse</a> |
          <a href='#' id='modal-olvido-link'>¬øOlvidaste tu contrase√±a?</a>
        </p>
      </div>
      <div class='conten_izquierdo'>
        <h2>Artesanos tejiendo para crecer</h2>
            <p>√önete a nuestra comunidad y descubre la belleza de las artesan√≠as Zen√∫</p>
      </div>
    </div>`;

    const registroForm = `
    <div class='conten_gen'>
      <div class='tex'>
            <h3>Crear cuenta</h3>
            <p>√önete a nuestra comunidad</p>
            <input type='text' placeholder='Nombre de usuario' id='reg-usuario'>
            <input type='email' placeholder='Correo electr√≥nico' id='reg-email'>
            <input type='password' placeholder='Contrase√±a' id='reg-contrase√±a'>
            <button type='button' class='btn_ingresar' onclick='registrarUsuario()'>Registrarse</button>
            <p>
                <a href='#' id='modal-login-link'>¬øYa tienes cuenta? Inicia sesi√≥n</a>
            </p>
      </div>
      <div class='conten_izquierdo'>
            <h2>Bienvenido a la familia Zen√∫</h2>
            <p>Forma parte de nuestra comunidad y apoya el arte ancestral</p>
      </div>
    </div>`;

    const olvidoForm = `
    <div class='conten_gen'>
      <div class='tex'>
        <h3>Recuperar contrase√±a</h3>
            <p>Ingresa tu email para recuperar tu cuenta</p>
            <input type='email' placeholder='Correo electr√≥nico' id='olvido-email'>
            <button type='button' class='btn_ingresar' onclick='recuperarContrase√±a()'>Enviar enlace</button>
            <p>
                <a href='#' id='modal-login-link-olvido'>¬øRecordaste tu contrase√±a? Inicia sesi√≥n</a>
            </p>
      </div>
      <div class='conten_izquierdo'>
            <h2>No te preocupes</h2>
            <p>Te ayudamos a recuperar el acceso a tu cuenta</p>
      </div>
    </div>`;

    // FUNCIONES DE INICIALIZACI√ìN
    function init() {
        cargarProductos();
        verificarUsuarioLogueado();
        configurarEventListeners();
    }

    function cargarProductos() {
        productosGrid.innerHTML = '';
        productosFiltrados.forEach(producto => {
            const productoElement = crearElementoProducto(producto);
            productosGrid.appendChild(productoElement);
        });
    }

    function crearElementoProducto(producto) {
        const div = document.createElement('div');
        div.className = 'producto';
        div.innerHTML = `
            <div class="producto-imagen">
                <img src="${producto.imagen}" alt="${producto.nombre}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjVGNUY1Ii8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkltYWdlbiBubyBkaXNwb25pYmxlPC90ZXh0Pgo8L3N2Zz4K'">
            </div>
            <div class="producto-info">
                <h3>${producto.nombre}</h3>
                <p>${producto.descripcion}</p>
                <div class="producto-precio">$${producto.precio.toLocaleString()}</div>
                <div class="producto-stock">Stock: ${producto.stock} unidades</div>
                <button class="btn-agregar" onclick="agregarCarrito('${producto.nombre}')">
                    Agregar al carrito
                </button>
            </div>
        `;
        return div;
    }

    function verificarUsuarioLogueado() {
        const usuarioLogueado = localStorage.getItem('usuarioLogueado');
        if (usuarioLogueado) {
            const usuario = localStorage.getItem('usuario') || 'Usuario';
            userName.textContent = usuario;
            userInfo.style.display = 'flex';
        }
    }

    function configurarEventListeners() {
        // Bot√≥n de cuenta
        document.getElementById('btn-cuenta').onclick = function() {
            const usuarioLogueado = localStorage.getItem('usuarioLogueado');
            if (usuarioLogueado) {
                alert('Ya est√°s logueado como: ' + localStorage.getItem('usuario'));
            } else {
                openModal(loginForm);
            }
        };

        // Bot√≥n de carrito
        document.getElementById('btn-carrito').onclick = function() {
            const usuarioLogueado = localStorage.getItem('usuarioLogueado');
            if (!usuarioLogueado) {
                openModal(loginForm);
            } else {
                if(carrito.length === 0) {
                    alert('No tienes productos en tu carrito');
                } else {
                    alert('Productos en tu carrito:\n' + carrito.join('\n'));
                }
            }
        };

        // Bot√≥n de logout
        document.getElementById('btn-logout').onclick = function() {
            localStorage.removeItem('usuarioLogueado');
            localStorage.removeItem('usuario');
            userInfo.style.display = 'none';
            alert('Sesi√≥n cerrada correctamente');
        };

        // Filtros
        document.getElementById('filtro-tipo').onchange = aplicarFiltros;
        document.getElementById('filtro-precio').onchange = aplicarFiltros;
        document.getElementById('ordenar-por').onchange = aplicarFiltros;
    }

    function aplicarFiltros() {
        const filtroTipo = document.getElementById('filtro-tipo').value;
        const filtroPrecio = document.getElementById('filtro-precio').value;
        const ordenarPor = document.getElementById('ordenar-por').value;

        // Filtrar por tipo
        productosFiltrados = productos.filter(producto => {
            if (filtroTipo && producto.tipo !== filtroTipo) return false;
            return true;
        });

        // Filtrar por precio
        if (filtroPrecio) {
            const [min, max] = filtroPrecio.split('-').map(p => p === '250000+' ? Infinity : parseInt(p));
            productosFiltrados = productosFiltrados.filter(producto => {
                if (max === Infinity) return producto.precio >= min;
                return producto.precio >= min && producto.precio <= max;
            });
        }

        // Ordenar
        productosFiltrados.sort((a, b) => {
            switch (ordenarPor) {
                case 'nombre':
                    return a.nombre.localeCompare(b.nombre);
                case 'precio-asc':
                    return a.precio - b.precio;
                case 'precio-desc':
                    return b.precio - a.precio;
                case 'popularidad':
                    return b.popularidad - a.popularidad;
                default:
                    return 0;
            }
        });

        cargarProductos();
    }

    // FUNCIONES DE MODAL
    function openModal(content) {
      modalContent.innerHTML = `<button class='modal-close' id='modal-close'>&times;</button>` + content;
      modalBg.classList.add('active');
      setTimeout(() => {
        document.getElementById('modal-close').onclick = closeModal;
        const reg = document.getElementById('modal-registro-link');
        if(reg) reg.onclick = (e) => { e.preventDefault(); openModal(registroForm); };
        const olv = document.getElementById('modal-olvido-link');
        if(olv) olv.onclick = (e) => { e.preventDefault(); openModal(olvidoForm); };
            const loginFromReg = document.getElementById('modal-login-link');
            if(loginFromReg) loginFromReg.onclick = (e) => { e.preventDefault(); openModal(loginForm); };
            const loginFromOlv = document.getElementById('modal-login-link-olvido');
            if(loginFromOlv) loginFromOlv.onclick = (e) => { e.preventDefault(); openModal(loginForm); };
      }, 10);
    }

    function closeModal() {
      modalBg.classList.remove('active');
    }

    // FUNCIONES DE CARRITO
    function agregarCarrito(producto) {
        carrito.push(producto);
        document.getElementById('carrito-badge').textContent = carrito.length;
        alert('Producto agregado: ' + producto);
    }

    // FUNCIONES DE AUTENTICACI√ìN
    function iniciarSesion() {
        const usuario = document.getElementById('login-usuario').value;
        const contrase√±a = document.getElementById('login-contrase√±a').value;

        if (!usuario || !contrase√±a) {
            alert('Por favor completa todos los campos');
            return;
        }
        
        // Simulaci√≥n de login (aqu√≠ ir√≠a la l√≥gica real de autenticaci√≥n)
        if (usuario === 'admin' && contrase√±a === 'admin') {
            // Guardar estado de login en localStorage
            localStorage.setItem('usuarioLogueado', 'true');
            localStorage.setItem('usuario', usuario);
            alert('¬°Bienvenido! Redirigiendo al dashboard...');
            closeModal();
            window.location.href = './dashboard/dashboard.html';
        } else {
            alert('Usuario o contrase√±a incorrectos');
        }
    }
    
    function registrarUsuario() {
        const usuario = document.getElementById('reg-usuario').value;
        const email = document.getElementById('reg-email').value;
        const contrase√±a = document.getElementById('reg-contrase√±a').value;

        if (!usuario || !email || !contrase√±a) {
            alert('Por favor completa todos los campos');
            return;
        }
        
        // Validaci√≥n b√°sica de email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            alert('Por favor ingresa un email v√°lido');
            return;
        }
        
        // Simulaci√≥n de registro (aqu√≠ ir√≠a la l√≥gica real de registro)
        // Guardar estado de login en localStorage
        localStorage.setItem('usuarioLogueado', 'true');
        localStorage.setItem('usuario', usuario);
        alert('¬°Registro exitoso! Ya est√°s logueado');
        closeModal();
    }
    
    function recuperarContrase√±a() {
        const email = document.getElementById('olvido-email').value;
        
        if (!email) {
            alert('Por favor ingresa tu email');
            return;
        }
        
        // Validaci√≥n b√°sica de email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            alert('Por favor ingresa un email v√°lido');
            return;
        }
        
        // Simulaci√≥n de recuperaci√≥n (aqu√≠ ir√≠a la l√≥gica real de recuperaci√≥n)
        alert('Se ha enviado un enlace de recuperaci√≥n a tu email');
        openModal(loginForm);
    }

    // Cerrar modal al hacer clic fuera
    modalBg.onclick = function(e) {
        if (e.target === modalBg) {
            closeModal();
        }
    };

    // Inicializar la aplicaci√≥n
    init();
    </script>
</body>
</html>